类加载机制是指虚拟机把描述类的数据\(类的元数据\)从class文件加载到内存，并对类的元数据进行校验、解析、初始化，最终形成可以被Java虚拟机使用的Java类型。

类在Java虚拟机中的生命周期为：加载-校验-准备-解析-初始化-使用-卸载 7个阶段。

![](/assets/类生命周期.png)

**加载**:"加载"是"类加载"过程的一个阶段,此阶段完成的功能是:

通过类的全限定名来获取定义此类的二进制字节流

将此二进制字节流所代表的静态存储结构转化成方法区的运行时数据结构

在内存中生成代表此类的java.lang.Class对象,作为该类访问入口.

**验证**:连接阶段第一步.验证的目的是确保Class文件的字节流中信息符合虚拟机的要求,不会危害虚拟机安全,使得虚拟机免受恶意代码的攻击.大致完成以下四个校验动作:

文件格式验证

源数据验证

字节码验证

符号引用验证

**准备**:连接阶段第二步,正式为类变量分配内存并设置变量的初始值.\(仅包含类变量,不包含实例变量\).

**解析**:连接阶段第三步,虚拟机将常量池中的符号引用替换为直接引用,解析动作主要针对类或接口,字段,类方法,方法类型等等..

**初始化**:类的初始化是类加载过程的最后一步,在该阶段,才真正意义上的开始执行类中定义的java程序代码.该阶段会执行类构造器.

**使用**:使用该类所提供的功能.

**卸载**:从内存中释放.

参考：

《深入理解Java虚拟机》

博客[http://www.cnblogs.com/fingerboy/p/5456371.html](http://www.cnblogs.com/fingerboy/p/5456371.html)

